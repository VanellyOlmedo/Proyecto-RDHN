{% extends 'core/base.html' %}

{% block title %}Cerrar Per√≠odo - Fondo Mutuo{% endblock %}

{% block content %}
<div class="content-header">
    <h1 class="content-title">üîí Cerrar Per√≠odo: {{ fondo }}</h1>
    <div class="breadcrumb">
        <span class="breadcrumb-item"><a href="{% url 'fondo_mutuo:fondos_listar' %}">Per√≠odos</a></span>
        <span class="breadcrumb-item"><a href="{% url 'fondo_mutuo:fondos_detalle' fondo.pk %}">{{ fondo.periodo }}</a></span>
        <span class="breadcrumb-item">Cerrar</span>
    </div>
</div>

<div class="card" style="max-width: 800px; margin: 0 auto;">
    <div class="card-header">
        <h2 class="card-title">Confirmaci√≥n de Cierre</h2>
    </div>
    
    <div class="card-body">
        <div class="alert alert-warning">
            <span>‚ö†</span>
            <div>
                <strong>¬°Atenci√≥n! Esta acci√≥n es irreversible</strong>
                <p>Al cerrar este per√≠odo:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>No se podr√°n registrar m√°s aportes</li>
                    <li>No se podr√°n aprobar m√°s solicitudes de ayuda</li>
                    <li>El saldo disponible quedar√° congelado</li>
                    <li>Solo se podr√° consultar informaci√≥n hist√≥rica</li>
                </ul>
            </div>
        </div>
        
        <!-- Resumen del Per√≠odo -->
        <div style="background: rgba(69, 162, 158, 0.1); padding: 20px; border-radius: var(--radius-md); margin: 20px 0;">
            <h3 style="margin-bottom: 15px; color: var(--color-secondary);">Resumen del Per√≠odo</h3>
            <div class="grid grid-3" style="gap: 20px;">
                <div>
                    <strong style="color: var(--color-text-dim); font-size: 12px;">TOTAL INGRESOS</strong>
                    <p style="font-size: 24px; color: var(--color-success); margin-top: 5px;">
                        L. {{ fondo.total_ingresos|floatformat:2 }}
                    </p>
                </div>
                <div>
                    <strong style="color: var(--color-text-dim); font-size: 12px;">TOTAL EGRESOS</strong>
                    <p style="font-size: 24px; color: var(--color-error); margin-top: 5px;">
                        L. {{ fondo.total_egresos|floatformat:2 }}
                    </p>
                </div>
                <div>
                    <strong style="color: var(--color-text-dim); font-size: 12px;">SALDO FINAL</strong>
                    <p style="font-size: 24px; color: var(--color-secondary); margin-top: 5px;">
                        L. {{ fondo.saldo_disponible|floatformat:2 }}
                    </p>
                </div>
            </div>
        </div>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label class="form-label">Observaciones del Cierre</label>
                {{ form.observaciones }}
                {% if form.observaciones.errors %}
                    <span style="color: var(--color-error); font-size: 12px;">{{ form.observaciones.errors.0 }}</span>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 15px; background: rgba(244, 67, 54, 0.1); border-radius: var(--radius-md);">
                    {{ form.confirmar }}
                    <span style="font-weight: 600;">{{ form.confirmar.label }}</span>
                </label>
                {% if form.confirmar.errors %}
                    <span style="color: var(--color-error); font-size: 12px;">{{ form.confirmar.errors.0 }}</span>
                {% endif %}
                <small style="color: var(--color-text-dim); display: block; margin-top: 8px;">
                    {{ form.confirmar.help_text }}
                </small>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="submit" class="btn btn-error">
                    <span>üîí</span> Confirmar Cierre
                </button>
                <a href="{% url 'fondo_mutuo:fondos_detalle' fondo.pk %}" class="btn">
                    <span>‚ùå</span> Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}