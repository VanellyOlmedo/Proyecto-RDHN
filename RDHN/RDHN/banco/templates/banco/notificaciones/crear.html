{% extends 'core/base.html' %}
{% block title %}Nueva Notificaci√≥n{% endblock %}
{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<style>
    .select2-container { width: 100% !important; }
    .select2-container--default .select2-selection--single {
        height: 40px;
        border: 1px solid var(--color-border);
        border-radius: 6px;
        background: var(--color-bg);
    }
    .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 38px;
        color: var(--color-text);
    }
</style>
{% endblock %}
{% block content %}
<div class="content-header">
    <h1 class="content-title">üîî Nueva Notificaci√≥n</h1>
</div>
<div class="card" style="max-width: 900px; margin: 0 auto;">
    <div class="card-header">
        <h2 class="card-title">Informaci√≥n de la Notificaci√≥n</h2>
    </div>
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            <div class="grid grid-2">
                <div class="form-group">
                    <label class="form-label">Usuario Destinatario *</label>
                    {{ form.usuario }}
                    {% if form.usuario.errors %}<span style="color: var(--color-error); font-size: 12px;">{{ form.usuario.errors.0 }}</span>{% endif %}
                </div>
                <div class="form-group">
                    <label class="form-label">Tipo de Notificaci√≥n *</label>
                    {{ form.tipo }}
                    {% if form.tipo.errors %}<span style="color: var(--color-error); font-size: 12px;">{{ form.tipo.errors.0 }}</span>{% endif %}
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">T√≠tulo *</label>
                {{ form.titulo }}
                {% if form.titulo.errors %}<span style="color: var(--color-error); font-size: 12px;">{{ form.titulo.errors.0 }}</span>{% endif %}
            </div>
            <div class="form-group">
                <label class="form-label">Mensaje *</label>
                {{ form.mensaje }}
                {% if form.mensaje.errors %}<span style="color: var(--color-error); font-size: 12px;">{{ form.mensaje.errors.0 }}</span>{% endif %}
            </div>
            <div class="grid grid-3">
                <div class="form-group">
                    <label class="form-label">Pr√©stamo (Opcional)</label>
                    {{ form.prestamo }}
                </div>
                <div class="form-group">
                    <label class="form-label">Cuota (Opcional)</label>
                    {{ form.cuota }}
                </div>
                <div class="form-group">
                    <label class="form-label">Dividendo (Opcional)</label>
                    {{ form.dividendo }}
                </div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="submit" class="btn btn-primary">üì® Enviar Notificaci√≥n</button>
                <a href="{% url 'banco:notificaciones_listar' %}" class="btn">‚ùå Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        $('#id_usuario').select2({
            placeholder: 'Seleccione un usuario',
            allowClear: true,
            width: '100%'
        });
        $('#id_prestamo').select2({
            placeholder: 'Seleccione un pr√©stamo (opcional)',
            allowClear: true,
            width: '100%'
        });
        $('#id_cuota').select2({
            placeholder: 'Seleccione una cuota (opcional)',
            allowClear: true,
            width: '100%'
        });
        $('#id_dividendo').select2({
            placeholder: 'Seleccione un dividendo (opcional)',
            allowClear: true,
            width: '100%'
        });
    });
</script>
{% endblock %}